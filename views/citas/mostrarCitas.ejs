<!DOCTYPE html>
<html lang="es">
    <head>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
        <!-- FontAwesome para Ã­conos -->
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
        <!-- Estilos personalizados -->
        <link rel="stylesheet" href="styles/reporteCitas.css">

        <title>Reporte de Citas</title>
    </head>
    <body>

        <main>
            <%- include('../partials/navegacion') %>



            <section class="contenido">
                <%- include('../partials/tituloPagina.ejs') %>

                <section class="container">
                    <form class="p-4 border" action="">
                        <h1>Filtro de Citas</h1>

                        <div class="mb-3">
                            <label class="form-label" for="">Cedula Paciente</label>
                            <input class="form-control" type="text" name="" id="">
                        </div>
                        <div class="mb-3">
                            <label for="" class="form-label">Estado Cita</label>
                            <select class="form-select" name="" id="">
                                <option selected disabled>Seleccione una opcion</option>
                                <option value="">Citas Canceladas</option>
                                <option value="">Citas Pendiente</option>
                                <option value="">Citas Atendida</option>
                            </select>
                        </div>
                        <div class="">
                            <button class="btn btn-success">Buscar</button>
                        </div>
                    </form>
                </section>

                <section class="bloque-flex">
                    <div class="container">
                        <h1>Consulta de Citas</h1>
                        <table class="table table-striped table-bordered text-center">
                            <thead>
                                <tr>
                                    <th scope="col">#</th>
                                    <th scope="col">Fecha</th>
                                    <th scope="col">Hora</th>
                                    <th scope="col">Cedula</th>
                                    <th scope="col">Paciente</th>
                                    <th scope="col">Doctor</th>
                                    <th scope="col">Especialidad</th>
                                    <th scope="col">Estado</th>
                                    <th scope="col">Opciones</th>
                                </tr>
                            </thead>
                            <tbody>
                                <!-- Verifica que datosParaFront tenga elementos -->
                                
                                <% datosCitas.forEach(Citas => { %>
                                    <tr>
                                        <td id="id"><%= Citas.idtb_citas %></td>
                                        <td id="fecha"><%= new Date(Citas.fecha).toLocaleDateString('es-ES') %></td>
                                        <td id="hora"><%= Citas.hora %></td>
                                        <td id="cedula"><%= Citas.cedula %></td>
                                        <td id="nombrePaciente"><%= Citas.nombreUnoPaciente %> <%= Citas.nombreDosPaciente %> <%= Citas.apellidoUnoPaciente %> <%= Citas.apellidoDosPaciente %> </td>
                                        <td id="nombreDoctor"><%= Citas.primerNombreMedico %> <%= Citas.segundoNombreMedico %> <%= Citas.primerApellidoMedico %> <%= Citas.segundoApellidoMedico %> </td>
                                        <td id="especialidad"><%= Citas.especialidad%></td>
                                        <td id="estado"><%= Citas.estado === null || Citas.estado === undefined ? 'Estado no disponible' : (Citas.estado ? 'Activo' : 'Inactivo') %></td>
                                        <td>            
                                            <button class="mostrarEditarCitas btn btn-warning" data-id="<%= Citas.idtb_citas %>">Editar</button>
                                        </td>

                                    </tr>
                                <% }); %>

                            </tbody>
                        </table>
                    </div>
                </section>
            </section>
        </main>
        <%- include('../partials/footer') %>

        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
        <script src="../public/js/slidebar.js"></script>
        <script src="ajax/mostrarCitas.js"></script>

    </body>
</html>
